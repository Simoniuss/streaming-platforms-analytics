"use strict";(self.webpackChunkstreaming_platforms_analytics=self.webpackChunkstreaming_platforms_analytics||[]).push([[141],{141:function(t,n,e){e.r(n),e.d(n,{default:function(){return O}});var r=e(5671),a=e(3144),i=e(7326),o=e(136),u=e(7277),c=e(2791),f=e(4625),h=e(4942);function p(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}var s=e(7762);var d=e(4165),l=(0,d.Z)().mark(v);function v(){var t,n,e,r,a,i;return(0,d.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e=[t=this];case 1:n=e.reverse(),e=[];case 2:if(!(t=n.pop())){o.next=8;break}return o.next=5,t;case 5:if(r=t.children)for(a=0,i=r.length;a<i;++a)e.push(r[a]);o.next=2;break;case 8:if(e.length){o.next=1;break}case 9:case"end":return o.stop()}}),l,this)}function g(t,n){t instanceof Map?(t=[void 0,t],void 0===n&&(n=x)):void 0===n&&(n=y);for(var e,r,a,i,o,u=new Z(t),c=[u];e=c.pop();)if((a=n(e.data))&&(o=(a=Array.from(a)).length))for(e.children=a,i=o-1;i>=0;--i)c.push(r=a[i]=new Z(a[i])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(w)}function y(t){return t.children}function x(t){return Array.isArray(t)?t[1]:null}function m(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function w(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function Z(t){this.data=t,this.depth=this.height=0,this.parent=null}function k(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function A(t,n,e,r,a){for(var i,o=t.children,u=-1,c=o.length,f=t.value&&(r-n)/t.value;++u<c;)(i=o[u]).y0=e,i.y1=a,i.x0=n,i.x1=n+=i.value*f}function B(t,n,e,r,a){for(var i,o=t.children,u=-1,c=o.length,f=t.value&&(a-e)/t.value;++u<c;)(i=o[u]).x0=n,i.x1=r,i.y0=e,i.y1=e+=i.value*f}Z.prototype=g.prototype=(0,h.Z)({constructor:Z,count:function(){return this.eachAfter(p)},each:function(t,n){var e,r=-1,a=(0,s.Z)(this);try{for(a.s();!(e=a.n()).done;){var i=e.value;t.call(n,i,++r,this)}}catch(o){a.e(o)}finally{a.f()}return this},eachAfter:function(t,n){for(var e,r,a,i=this,o=[i],u=[],c=-1;i=o.pop();)if(u.push(i),e=i.children)for(r=0,a=e.length;r<a;++r)o.push(e[r]);for(;i=u.pop();)t.call(n,i,++c,this);return this},eachBefore:function(t,n){for(var e,r,a=this,i=[a],o=-1;a=i.pop();)if(t.call(n,a,++o,this),e=a.children)for(r=e.length-1;r>=0;--r)i.push(e[r]);return this},find:function(t,n){var e,r=-1,a=(0,s.Z)(this);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(t.call(n,i,++r,this))return i}}catch(o){a.e(o)}finally{a.f()}},sum:function(t){return this.eachAfter((function(n){for(var e=+t(n.data)||0,r=n.children,a=r&&r.length;--a>=0;)e+=r[a].value;n.value=e}))},sort:function(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),a=null;t=e.pop(),n=r.pop();for(;t===n;)a=t,t=e.pop(),n=r.pop();return a}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var a=r.length;t!==e;)r.splice(a,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t},links:function(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n},copy:function(){return g(this).eachBefore(m)}},Symbol.iterator,v);var b=function t(n){function e(t,e,r,a,i){!function(t,n,e,r,a,i){for(var o,u,c,f,h,p,s,d,l,v,g,y=[],x=n.children,m=0,w=0,Z=x.length,k=n.value;m<Z;){c=a-e,f=i-r;do{h=x[w++].value}while(!h&&w<Z);for(p=s=h,g=h*h*(v=Math.max(f/c,c/f)/(k*t)),l=Math.max(s/g,g/p);w<Z;++w){if(h+=u=x[w].value,u<p&&(p=u),u>s&&(s=u),g=h*h*v,(d=Math.max(s/g,g/p))>l){h-=u;break}l=d}y.push(o={value:h,dice:c<f,children:x.slice(m,w)}),o.dice?A(o,e,r,a,k?r+=f*h/k:i):B(o,e,r,k?e+=c*h/k:a,i),k-=h,m=w}}(n,t,e,r,a,i)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}((1+Math.sqrt(5))/2);function M(t){if("function"!==typeof t)throw new Error;return t}function T(){return 0}function R(t){return function(){return t}}var C=e(885),D=e(9622),I=e(1190);function L(t,n,e,r){return function t(a,i){if(i>=r.length)return e(a);var o,u=new D.L,c=r[i++],f=-1,h=(0,s.Z)(a);try{for(h.s();!(o=h.n()).done;){var p=o.value,d=c(p,++f,a),l=u.get(d);l?l.push(p):u.set(d,[p])}}catch(w){h.e(w)}finally{h.f()}var v,g=(0,s.Z)(u);try{for(g.s();!(v=g.n()).done;){var y=(0,C.Z)(v.value,2),x=y[0],m=y[1];u.set(x,t(m,i))}}catch(w){g.e(w)}finally{g.f()}return n(u)}(t,0)}var _=e(2451),z=e(3928),E=e(184),N=function(t){(0,o.Z)(e,t);var n=(0,u.Z)(e);function e(t){var a;return(0,r.Z)(this,e),(a=n.call(this,t)).state={ref:c.createRef()},a.createTreemap=a.createTreemap.bind((0,i.Z)(a)),a}return(0,a.Z)(e,[{key:"componentDidMount",value:function(){this.props.data?this.createTreemap():console.log("no data")}},{key:"componentDidUpdate",value:function(){this.props.data?this.createTreemap():console.log("no data")}},{key:"createTreemap",value:function(){var t=this,n=this.state.ref.current;(0,f.Z)(n).selectAll("*").remove();var e=(0,_.Z)().rangeRound([0,this.props.width]),r=(0,_.Z)().rangeRound([0,this.props.height]),a=(0,z.Z)().domain(["Netflix","Prime","Disney"]).range(["#B81D24","#00A8E1","#113CCF"]),i=(0,z.Z)().domain(["Netflix","Prime","Disney"]).range(["white","black","white"]),o=function(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),a=2;a<e;a++)r[a-2]=arguments[a];return L(t,I.Z,n,r)}(this.props.data,(function(t){return t.length}),(function(t){return t.platform}),(function(t){return t.type}),(function(t){return t.genre[0]})),u=g(o);function c(t){e.domain([t.x0,t.x1]),r.domain([t.y0,t.y1]),(0,f.Z)(n).selectAll("rect").data(t.descendants()).enter().append("rect").attr("x",(function(t){return e(t.x0)})).attr("y",(function(t){return r(t.y0)})).attr("width",(function(t){return e(t.x1)-e(t.x0)})).attr("height",(function(t){return r(t.y1)-r(t.y0)})).style("stroke","white").style("stroke-width","0.4px").style("fill",(function(t){return 1===t.depth?a(t.data[0]):2===t.depth?a(t.parent.data[0]):3===t.depth?a(t.parent.parent.data[0]):"transparent"})),(0,f.Z)(n).selectAll("text").data(t.descendants()).enter().append("text").attr("x",(function(t){return e(t.x0)+5})).attr("y",(function(t){return r(t.y0)+15})).text((function(t){return 0===t.depth?"All":e(t.x1)-e(t.x0)>20&&r(t.y1)-r(t.y0)>10?t.data[0]:""})).attr("font-size",(function(t){return e(t.x1)-e(t.x0)>120&&r(t.y1)-r(t.y0)>20?"1em":e(t.x1)-e(t.x0)>80&&r(t.y1)-r(t.y0)>20?"0.8em":e(t.x1)-e(t.x0)>50&&r(t.y1)-r(t.y0)>10?"0.6em":e(t.x1)-e(t.x0)>30&&r(t.y1)-r(t.y0)>10?"0.3em":"0.2em"})).attr("font-weight","bold").attr("fill",(function(t){return 1===t.depth?i(t.data[0]):2===t.depth?i(t.parent.data[0]):3===t.depth?i(t.parent.parent.data[0]):"white"}))}u.sum((function(t){return t[1]})).sort((function(t,n){return n.height-t.height||n.value-t.value})),function(){var t=b,n=!1,e=1,r=1,a=[0],i=T,o=T,u=T,c=T,f=T;function h(t){return t.x0=t.y0=0,t.x1=e,t.y1=r,t.eachBefore(p),a=[0],n&&t.eachBefore(k),t}function p(n){var e=a[n.depth],r=n.x0+e,h=n.y0+e,p=n.x1-e,s=n.y1-e;p<r&&(r=p=(r+p)/2),s<h&&(h=s=(h+s)/2),n.x0=r,n.y0=h,n.x1=p,n.y1=s,n.children&&(e=a[n.depth+1]=i(n)/2,r+=f(n)-e,h+=o(n)-e,(p-=u(n)-e)<r&&(r=p=(r+p)/2),(s-=c(n)-e)<h&&(h=s=(h+s)/2),t(n,r,h,p,s))}return h.round=function(t){return arguments.length?(n=!!t,h):n},h.size=function(t){return arguments.length?(e=+t[0],r=+t[1],h):[e,r]},h.tile=function(n){return arguments.length?(t=M(n),h):t},h.padding=function(t){return arguments.length?h.paddingInner(t).paddingOuter(t):h.paddingInner()},h.paddingInner=function(t){return arguments.length?(i="function"===typeof t?t:R(+t),h):i},h.paddingOuter=function(t){return arguments.length?h.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):h.paddingTop()},h.paddingTop=function(t){return arguments.length?(o="function"===typeof t?t:R(+t),h):o},h.paddingRight=function(t){return arguments.length?(u="function"===typeof t?t:R(+t),h):u},h.paddingBottom=function(t){return arguments.length?(c="function"===typeof t?t:R(+t),h):c},h.paddingLeft=function(t){return arguments.length?(f="function"===typeof t?t:R(+t),h):f},h}().size([this.props.width,this.props.height]).paddingTop(20).paddingRight(1).paddingLeft(1).paddingBottom(2).paddingInner(0)(u),this.props.genre||this.props.type?c(u.find((function(n){return n.data[0]===t.props.platform})).find((function(n){return n.data[0]===t.props.type}))):this.props.platform?c(u.find((function(n){return n.data[0]===t.props.platform}))):c(u)}},{key:"render",value:function(){return(0,E.jsx)("svg",{ref:this.state.ref,viewBox:"-5 -20 ".concat(this.props.width+30," ").concat(this.props.height+20)})}}]),e}(c.Component),O=N},1190:function(t,n,e){function r(t){return t}e.d(n,{Z:function(){return r}})}}]);
//# sourceMappingURL=141.a5317927.chunk.js.map